!function(){"use strict";function t(){return p}function a(){for(var t=[],a=0;a<n().length;a++)t.push(a);return p=t,t}function n(){return c}function e(){var t=$("#dataEntryBox").val().split(",").map(function(t){return parseFloat(t)});return c=t,t}function r(t){return 0===t.length?0:t.reduce(function(t,a){return t+a})}function o(t){var a=n();if(0===t)return[l.names[t]].concat(a.map(function(t){return t/a[0]*100}));for(var e=[],o=[],u=[],c=[],p=[1],s=[100],f=[a[0]],h=[],v=1;v<a.length;v++)e[v]=Math.abs(a[v]-a[v-1]),o[v]=1===v?i:i*Math.pow(1-i,v-1),u[v]=Math.log(o[v])*e[v],c[v]=r(o),p[v]=1-c[v],s[v]=100*p[v],f[v]=a[v-1]*p[v],h[v]=Math.abs(f[v]-f[v-1]);var g=a[a.length-1]*Math.log(Math.pow(1-i,v-1));return $("#logLabel").text("Log-Likelihood = "+(r(u)+g)),[l.names[t]].concat(s)}function u(t){var a=JSON.stringify(n());$.ajax({url:"http://blooming-temple-6800.herokuapp.com/sg-mle",dataType:"jsonp",data:{data:a}}).done(function(a){$("#outputlabel").text("Theta = "+a),i=parseFloat(a),t()}).fail(function(){alert("The solver cannot converge to theta value")})}var i=.103329299592121;$("#outputlabel").text("Theta = "+i);var l={names:["Actual Data","Estimated Data"],axis:{x:{label:{text:"Years",position:"outer-center"}},y:{label:{text:"% Survivors",position:"outer-middle"}}}},c=e(),p=a(),s=new LineGraph(l,t,o,a);s.genGraph(),$("#updateTextArea").click(function(){e(),a(),u(function(){s.updateData()})})}();